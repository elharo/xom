Todo:

Before 1.0:
-----------

Make all JavaDoc valid XHTML and verify this with validator;
to do this we need an XHTML doclet; no let's use Tidy or jtidy 
on the javadoc through an ant task

Spell check

Line length corrections

Add a class hierarchy diagram to nu.xom package.html

Add information about O(1), O(length) etc. to JavaDoc

Finish tutorial

explore whether table lookup via arrays would speed up serialization and/or
verification

Check Javadoc guidelines at Sun for where to capitalize and put periods.
Bottom line: don't capitalize first word; use period only at end of complete sentences;
or for multisentence comments; use lower case non code-tagged to distinguish objects from classes

redo copyright and license notice to use /* */ instead of //
comments????

Add JavaDoc comments to unit tests that describe what each test tests

Look into a code beautifier for the line length

Before beta:
-----------

Add a descriptive, non-public class with main method for JAR file

Use more fixtures to clean up unit tests.

Run JCoverage across the unit tests

Need to make sure you detect syntax errors in XPointer 
after first successful part????

Before alpha:
------------

should I make Serializer into XMLSerializer and make 
Serializer a more generic class capableof generating
non-well-formed XML, binary infosets, HTML, etc.????

Add more encoding classes, particularly for Japanese and Chinese

Test SAXConverter and write Unit tests for it

BeanInfo classes????

add line numbers and URIs to the XInclude exceptions

Add a benchmarks package that has code to be benchmarked and 
possibly code to run benchmarks

should I make the nu.xom.samples classes non-public to indicate they can't be relied on????

Consider whether or not validity errors should cause exceptions.
perhaps an invalid document should be available even when validating? 
Perhaps a validate method that returns a boolean? No, need to return a Document too...

Figure out how hard it is to backport to 1.1; replace task in ant might be helpful

consider whether OutputStream should be passed to serialize method rather 
than used to construct the serializer; how many tasks need to write multiple documents
onto one stream vs. writing multiple documents onto multiple streams with same options

Should NodeList be named Nodes????

canonical xml test suite????

XSLT test suite????

XML test suite???? OASIS

SAX test suite????

partial documents after error???? or is it enough to use
NodeFactory in streaming mode for this?

Example 8-13 from Processing XML with Java could be ported to XOM

What happens if a SAXFilter produces multiple documents from a single document
a la shemp? only the last one is returned. This could easily be copied to a MultiBuilder
that returned a list of documents, or that had a document listener

What happens if a SAX filter removes endElement() events?

Add nu.xom.tests.XOMTestCase to default JavaDoc and minimal jar file.

Should DOMConverter publicly expose more convert methods for converting single 
elements and such to XOM elements? This would be one way.


should Element.removeAttribute return the Attribute removed?

XIncluder needs an option to use a NodeFactory

===============
Done 1.0d22:
===============

Silently preserve CDATA sections from parse to output when possible,

Added SourceCodeGenerator sample program that converts a well-formed XML
document into the XOM statements necessary to create the document

Changed ParseException to ParsingException

===============
Done 1.0d21:
===============

Added checkDetach protected method in Node. Could this 
and checkRemoveChild in Document make code any simpler by preventing
detaching of root?

copy() method is no loinger final in node classes

Cycles (an element acting as its own ancestor)
are no longer allowed. Attempting to create one throws a
CycleException.

NodeFactory.makeDocument() no longer takes an Element as an argument.
It is the responsibility of the NodeFactory to construct a suitable root 
element. However, when parsing this will quickly be replaced by the 
actual root element.

Serializer.setIndent throws an IllegalArgumentException
for negative values

Fixed bug where line breaks would be added if indenting, even in elements
where xml:space="preserve"

XInclude now consistently treats XPointers that don't match any
subresource as resource errors, rather than including nothing.

xml:base attributes added to XIncluded elements no longer 
have fragment IDs

A couple more XPointer syntax errors are now detected when XIncluding

In XIncludeException the getRootCause and setRootCause() methods have
been replaced by initCause() and getCause().

The initCause method in the various exception classes 
is now much more consistent with its definition in Java 1.4.

XSLException no longer extends XMLException. This means it is now a checked
exception instead of a runtime exception.

Xalan 2.5.1 has replaced Saxon 6.5.2 as the bundled XSLT processor
due to a bug in SAXON that incorrectly reported document fragments 
resulting from XSL transforms 

Minor usability improvements and code cleanups in the build.xml file

Added an overview page to the API docs

Cleaned up the API docs, especially for the exception classes

===============
Done 1.0d20:
===============

build test now excludes MegaTest and XOMTestCase

Do not compress jar archive in order to load classes faster

build(File) now works properly on Windows. This fixes numerous
unit test failures in Windows


===============
Done 1.0d19:
===============

By default, the serializer and toXML methods now use
numeric character references to
to escape all tabs, carriage returns, and line feeds in 
attribute values and  carriage returns in text nodes. 
This helps make round tripping more reliable and robust.
However, if the user indicates that white space is not significant
by calling either setMaxLength or setIndent, then these characters
will not be preserved. If the user calls setLineSeparator,
then tabs will still be preserved but carriage returns and line
feeds may not be. 

Cleaned up unit tests

Major speed improvement in the Node.equals() method.
It now executes in about half the time.

For symmetry makeElement is now startMakingElement
endElement is now finishMakingElement.


Characters from Planes 1 to 15 are now escaped correctly 
by the serializer

===============
Done 1.0d18:
===============

Made XOMTestCase public, and cleaned up its code and API
for greater consistency with junit.framework.TestCase

Added support for streaming and partial builds by subclassing 
NodeFactory

===============
Done 1.0d17:
===============

XSLTransform is final

Added unit tests for toString methods and fixed various bugs 
thereby uncovered

IPv6 URIs of the form described in RFC 2732 are now allowed

Fixed various bugs in XInclude. It can now process all the test cases that
do not use the xpointer() scheme or unparsed entities.

The correct exception is now thrown when validating with Crimson.

You can now build with Crimson in Java 1.4.1

Removed numerous unused local variables thanks to pmd

Removed some duplicate code in Builder and Verifier thanks to Same

===============
Done 1.0d16:
===============

The standard jar file no longer includes the samples, tests, and benchmarks packages

Moved SAXConverter and DOMConverter out of the core package into a new 
nu.xom.converters package

Improved compatibility with Java 1.2

SAX filters can no longer bypass well-formedness checks

Worked around a Xerces and Crimson bug that inhibits relative URL
resolution from pathless base URLs such as 
http://www.cafeconleche.org 

The FibonacciSOAPClient sample program works now

More accurate exception messages from the XSLTransform constructors

XSLT unit tests

The distribution now includes the SAXON jar archive so that XSLT works with 
Java 1.3.

Fixed a nasty bug in Element.toXML that was making XSLT transforms
fail when elements were in the default namespace

You can now transform a NodeList as well as a complete document

Document.insertChild(DocType, position) now throws an IllegalAddException
if the Document already has a DocType, rather than silently replacing it.

===============
Done 1.0d15:
===============

Serializer no longer wraps and indents text when xml:space="preserve", 
regardless of the setting of indents and maxlength

XIncluder now has unit tests.

XIncluder now adds xml:base attributes to included elements as necessary

Fixed bug in Document and Element copy constructors that failed to preserve base URI.
This also fixes a bug in the XIncluder

The Element.getChildElements(String name, String namespaceURI method)
now allows a null or empty string local name to stand for any local name,
so you can use this method to get all elements in a certain namespace.
The null namespace is auto-converted to the empty string namespace.

===============
Done 1.0d14:
===============

Worked around some bugs in Xerces that caused the wrong exception
to be thrown when validating.

Improved compatibility with Crimson, the default parser
in Java 1.4

DOMConverter unit tests no longer depend on Xerces

insertChild(String, int) now throws a NullPointerException if String is null

Fixed a nasty bug in Document's copy constructor

Disallowed fragment identifiers in system literal URI references

Fixed several bugs involving the handling of
 notation and unparsed entity declarations in
the internal DTD subset

Added unit tests for internal DTD subset

Fixed build.xml to point at Xerces properly

NonVerifyingFactory for use with parser-created documents

Text class stores content in UTF-8 internally. This reduces memory usage but increases
execution time.

===============
Done 1.0d13:
===============

Several additional methods in Element were marked final (getAttributeCount(),
getNamespacePrefix(int index), removeChildren(),
and getAttribute(int))

Big memory optimizations

The arguments to insertChild (and checkInsertChild and checkRemoveChild) have been reversed.

removeChild now returns the Node it removes

Added support for EBCDIC-37

Fixed another bug on changing namespace URI in XHTML documents

If the Serializer's line separator is set, then all line separators are
changed to that separator on output. If the line separator is not explicitly
set, then all line breaks in source text are preserved as is.

The Builder method
    public Document build(String document, String baseURI) 
now throws an IOException in the event that an IOException occurs while
parsing the external DTD subset
    
Improved unit testing for the serializer and Builder

Removed the equals() and hashCode() methods from the XSLTransform class.
They're probably not necessary, and their behavior was underspecified. 

The public and system IDs of DocType can now be the empty string,
in conformance with the XML spec.
    
===============
Done 1.0d12:
===============

Removed insertBefore and insertAfter from ParentNode

Fixed a bug on changing namespace URI to empty string on 
an element that has attributes

===============
Done 1.0d11:
===============

Added an ANT build.xml file

Wrote unit test for all 6 build methods in Builder and for preserveBaseURI
in Serializer

Worked around bug in later versions of Xerces that doesn't like 
null entityresolvers

Allow base URIs that contain % escapes

Fixed bug that throws NullPointerException when serializing documents without a base URI
with preserveBaseURI set

===============
Done 1.0d10:
===============

Fixed namespace handling

===============
Done 1.0d9:
===============

Removed vestigial getNextSibling() and getPreviousSibling() methods from Document

In Comment:
   Renamed check to checkValue
   Renamed setData to setValue

In ProcessingInstruction:
   Renamed checkData to checkValue
   Renamed setData to setValue

In Text:
   Renamed check to checkValue
   Renamed setData to setValue

In ParentNode:
   Renamed checkRemove to checkRemoveChild for symmetry with checkInsertChild 
   Moved thee two methods down into Element:
   
     public final void appendChild(String text) {

Fixed Builder bug that prevented parsing File objects whose
filenames contained spaces and other non-URL legal characters 

Fixed equals() method in Attribute.Type to work in mutliclassloader
environments 

Corrected usage instructions in samples programs to include the package name
 
Added checks on values of xml:base attributes that they are legal IRIs.
Mainly this involves checking the hex escaping.
   
===================
Done 1.0d8:
===============

XSLT works modulo some obscure bugs in handling the
undeclaration of the default namespace. I need to get some 
clarification on the proper behavior of SAX processors to 
fix this. The TrAX XOMSource and XOMResult classes are not yet
public because I'm still thinking aobut the proper API for these,
but you can use the XSLTransform class for most use-cases. 

It is now possible to undeclare the default namespace on a prefixed element
by passing the empty string as the prefix and URI to declareNamespace().


===================
Done 1.0d7:
===============

Added constraint that an element cannot have two attributes with
same name, same namespace URI, but different prefixes.
Changed auto attribute replacement to depend on local name
and namespace URI and never on qualified name alone

Removed getFirstChild(), getPreviousSibling(), and getNextSibling()
methods from Node

Added indexOf() method to ParentNode

Spell checked the API documentation

Moved XOMResult into the nu.xom.xslt package. 
XSLT still doesn't work, but it's a little closer to working. 


===================
Done 1.0d6:
===============

Now require all namespace URIs to be absolute URI references

Fixed TextWriter bug that prevented the line separator from being changed

Fixed a bug that allowed the namespace URI of a prefixed element to
be reset to the empty string

Fixed a bug that allowed the prefix of an element to
something that conflicts with one of its attributes
or additional namespace declarations

Element.toXML now generates empty-element tags for empty elements

Fixed a bug that prevented the detach() method from working on leaf nodes

Fixed a bug pointed out by Laurent Bihanic in getNamespaceURI(String prefix)
that failed to return namespace URIs from more than one level up in the hierarchy

Fixed a cosmetic bug in the handling of nbsp in ISO-8859-11 Thai

Added a nu.xom.xincluder package to provide XInclude support
The samples package includes a driver program that uses this
to resolve XIncludes in existing documents.

Added a nu.xom.canonical package to provide Canonical XML output.
The samples package includes a driver program that can canonicalize 
existing documents.

Relative URLs in system identifiers for DTDs are now resolved against the base URI
of the document specified in the builder instead of the current working directory.
Apparently this wasn't being picked up from the InputSource. 
I had to add an EntityResolver to take care of this.
Should this really be necessary?
Is this perhaps a Xerces 2.1 bug? 

===================
Done 1.0d5:
===============

Added getName() equals(), hashCode(), and toString() methods to Attribute.Type,
mostly to make it safe for multi-classloader environments

Added a method to Builder to parse a java.io.File object

Added  methods to Builder that allow the base URI to be specified when
  building from a Reader or an InputStream
  
Added an experimental method to Builder that builds directly from a String 
containing well-formed XML. 

Cleaned up Builder internals to reduce duplicate code.

Fixed a Builder bug that was preventing the default XMLReader from being loaded
in some circumstances

Added support for the following character sets to Serializer:

    ISO-8859-2
    ISO-8859-3
    ISO-8859-4
    ISO-8859-5
    ISO-8859-6
    ISO-8859-7
    ISO-8859-8
    ISO-8859-9
    ISO-8859-10
    ISO-8859-11
    ISO-8859-13
    ISO-8859-14
    ISO-8859-15
    ISO-8859-16

Note that although XOM supports them, not all Java virtual machines do.

Serializer matches character set names case-insensitively as specified in the
XML specification.

Fixed a bug in UnicodeWriter that was preventing reserved characters 
such as & and < from being 
escaped when the encoding was some variant of Unicode. (This is more evidence 
that premature optimization is the root of all evil. I just couldn't resist an obvious optimization
in the UnicodeWriter class, and it came back to bite me in the ass.)

Fixed a bug with unnecessary xmlns="" declarations on root elements by Serializer
and toXML in Element

Fixed incorrect hexadecimal escape sequences generated by TextWriter



===================
Done 1.0d4:
===============


Write unit tests for getAttributeValue

renamed getStringForm toXML()

base URI property in Node 

Give Serializer an option to preserve base URIs by adding xml:base attributes

Added missing write(Docype) method to Serializer to
fix a nasty infinite loop
Fixed bug that did not undeclare default namespace as necessary

Could I make the Attributes class non-public by just adding
getAttribute(int i) method to Element?

Ditto for namespaces?

changed addAdditionalnamespace to declareNamespace

Changed readAttribute to getAttributeValue

Moved removeChildren from ParentNode into Element because it didn't work 
on Document.

Added protected methods to allow the monitoring of insertions and deletions
from subclasses of Element and Document

Added protected methods to allow the monitoring of 
additional namespace declarations from subclasses in Element

Added protected methods to allow the monitoring of 
changes of local name, prefix, and URI from subclasses in Element
